<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KYC.ai - Identity Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- 🌟 NAVBAR -->
  <nav class="bg-white shadow-md fixed w-full z-10 hidden" id="navbar">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-indigo-700">KYC.ai</h1>
      <div class="space-x-6 text-gray-600 font-medium">
        <a href="#upload" class="hover:text-indigo-600">Upload</a>
        <a href="#results" class="hover:text-indigo-600">Results</a>
        <a href="#about" class="hover:text-indigo-600">About</a>
      </div>
    </div>
  </nav>

  <!-- 🔑 LOGIN SECTION (Aadhaar-inspired colors) -->
  <section id="login" class="h-screen flex items-center justify-center" style="background: linear-gradient(180deg,#fffaf0 0%, #fff3e0 50%, #fff0e6 100%);">
    <!-- decorative fingerprint (faint) -->
    <div class="absolute inset-0 pointer-events-none overflow-hidden">
      <svg class="absolute -right-40 -top-20 opacity-10" width="520" height="520" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 100 q40 -80 80 0" stroke="#FF6F00" stroke-width="2" opacity="0.08"/>
          <path d="M30 100 q30 -60 60 0" stroke="#0B5ED7" stroke-width="1.6" opacity="0.06"/>
          <path d="M40 100 q20 -40 40 0" stroke="#FF6F00" stroke-width="1.2" opacity="0.05"/>
          <path d="M50 100 q10 -20 20 0" stroke="#0B5ED7" stroke-width="1" opacity="0.04"/>
        </g>
      </svg>
    </div>

    <div class="relative bg-white shadow-xl rounded-2xl p-10 w-full max-w-md border-t-4" style="border-top-color:#FF6F00;">
      <!-- small brand panel -->
      <div class="absolute -top-10 left-6 flex items-center gap-3">
        <div class="w-14 h-14 rounded-lg flex items-center justify-center"
             style="background: linear-gradient(135deg,#FF6F00,#E65100); box-shadow: 0 8px 20px rgba(229,81,0,0.18);">
          <!-- minimal ID icon -->
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="4" width="18" height="14" rx="2" fill="white"/>
            <circle cx="8.5" cy="10.2" r="1.6" fill="#FF6F00"/>
            <rect x="12" y="9" width="6" height="1.6" rx="0.8" fill="#FF6F00"/>
            <rect x="12" y="12.6" width="6" height="1.2" rx="0.6" fill="#FF6F00"/>
          </svg>
        </div>

        <div>
          <h1 class="text-xl font-bold text-[#E65100]">KYC.ai</h1>
          <p class="text-xs text-gray-500">Secure Identity Verification</p>
        </div>
      </div>

      <!-- content -->
      <div class="mt-8">
        <h2 class="text-3xl font-bold text-[#0B5ED7] text-center mb-2">Welcome</h2>
        <p class="text-gray-600 text-center mb-6">Login to continue</p>

        <form onsubmit="login(event)" class="space-y-5">
          <div>
            <label class="block text-gray-700 font-medium mb-2">Email</label>
            <input type="email" id="email" required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF6F00]" placeholder="you@domain.com" />
          </div>

          <div>
            <label class="block text-gray-700 font-medium mb-2">Password</label>
            <input type="password" id="password" required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF6F00]" placeholder="••••••••" />
          </div>

          <button type="submit"
            class="w-full py-3 bg-[#0B5ED7] text-white rounded-xl font-semibold hover:bg-[#0848b2] transition">
            Login
          </button>
        </form>

        <p id="loginError" class="text-red-500 text-sm mt-4 text-center"></p>

        <p class="text-xs text-gray-500 mt-4 text-center">Tip: Use <span class="font-medium">admin@kyc.ai</span> / <span class="font-medium">123456</span></p>
      </div>
    </div>
  </section>

  <!-- 🏠 HERO SECTION -->
  <section id="hero" class="hidden bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-24 text-center">
    <h2 class="text-4xl font-bold mb-4">AI-Powered Identity Verification</h2>
    <p class="text-lg max-w-2xl mx-auto mb-8">
      Secure, fast and accurate KYC document verification for Banking, Financial Services & Insurance.
    </p>
    <a href="#upload" class="bg-white text-indigo-700 px-6 py-3 rounded-xl font-semibold shadow hover:bg-gray-100 transition">
      Get Started
    </a>
  </section>

  <!-- 📤 UPLOAD SECTION -->
  <section id="upload" class="hidden max-w-4xl mx-auto mt-20 bg-white shadow-lg rounded-2xl p-10">
    <h3 class="text-2xl font-bold text-indigo-700 mb-6 flex items-center gap-2">
      <i data-feather="upload-cloud"></i> Upload Your KYC Document
    </h3>

    <!-- Drag & Drop Zone -->
    <div id="dropzone" class="border-2 border-dashed border-indigo-400 p-12 rounded-xl text-center bg-indigo-50 hover:bg-indigo-100 cursor-pointer">
      <p class="text-gray-600">Drag & Drop Aadhaar/PAN here OR click to select</p>
      <input type="file" id="fileInput" accept=".jpg,.jpeg,.png,.pdf" class="hidden" />
    </div>

    <div id="preview" class="mt-3"></div>
    <p id="errorMsg" class="mt-2 text-sm text-red-500"></p>

    <!-- Button -->
    <button onclick="uploadFile()" class="mt-6 w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold hover:bg-indigo-700 transition">
      Extract & Verify
    </button>

    <!-- Loader -->
    <div id="loader" class="hidden text-center mt-6">
      <svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
      </svg>
      <p class="text-gray-500 mt-2">Processing your document...</p>
    </div>
  </section>

  <!-- 📊 RESULTS SECTION -->
  <section id="results" class="hidden max-w-4xl mx-auto mt-20 bg-white shadow-lg rounded-2xl p-10">
    <h3 class="text-2xl font-bold text-green-700 mb-6 flex items-center gap-2">
      <i data-feather="check-circle"></i> Extracted KYC Details
    </h3>

    <div class="space-y-3 text-gray-700">
      <p><strong>Name:</strong> <span id="name"></span></p>
      <p><strong>Aadhaar/PAN:</strong> <span id="idno"></span></p>
      <p><strong>Date of Birth:</strong> <span id="dob"></span></p>
      <p><strong>Address:</strong> <span id="address"></span></p>
    </div>

    <!-- Buttons -->
    <div class="flex gap-4 mt-8">
      <button class="flex-1 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition">Confirm ✅</button>
      <button onclick="reUpload()" class="flex-1 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition">Re-upload</button>
    </div>
  </section>

  <!-- ℹ️ ABOUT SECTION -->
  <section id="about" class="hidden max-w-5xl mx-auto mt-20 text-center py-12">
    <h3 class="text-2xl font-bold text-indigo-700 mb-4">About This Project</h3>
    <p class="text-gray-600 max-w-3xl mx-auto">
      This system leverages AI, Graph Neural Networks, NLP, and Computer Vision to verify Aadhaar/PAN and detect fraud. 
      It ensures secure, compliant, and efficient KYC/AML verification for BFSI sector.
    </p>
  </section>

  <!-- FOOTER -->
  <footer id="footer" class="hidden bg-gray-800 text-gray-300 py-6 text-center mt-16">
    <p>© 2025 KYC.ai – Secure Identity Verification</p>
  </footer>

  <script>
    feather.replace();

    // ================= LOGIN LOGIC =================
    function login(e) {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      if (email === "admin@kyc.ai" && password === "123456") {
        document.getElementById("login").classList.add("hidden");
        document.getElementById("navbar").classList.remove("hidden");
        document.getElementById("hero").classList.remove("hidden");
        document.getElementById("upload").classList.remove("hidden");
        document.getElementById("about").classList.remove("hidden");
        document.getElementById("footer").classList.remove("hidden");
        window.scrollTo(0, 0);
      } else {
        document.getElementById("loginError").innerText = "❌ Invalid credentials. Use admin@kyc.ai / 123456";
      }
    }

    // ================= UPLOAD LOGIC =================
    const dropzone = document.getElementById("dropzone");
    const fileInput = document.getElementById("fileInput");
    const preview = document.getElementById("preview");
    const errorMsg = document.getElementById("errorMsg");
    const loader = document.getElementById("loader");
    const results = document.getElementById("results");
    let selectedFile = null;

    dropzone.addEventListener("click", () => fileInput.click());
    fileInput.addEventListener("change", handleFile);

    dropzone.addEventListener("dragover", (e) => {
      e.preventDefault();
      dropzone.classList.add("bg-indigo-100");
    });

    dropzone.addEventListener("dragleave", () => {
      dropzone.classList.remove("bg-indigo-100");
    });

    dropzone.addEventListener("drop", (e) => {
      e.preventDefault();
      fileInput.files = e.dataTransfer.files;
      handleFile();
    });

    function handleFile() {
      const file = fileInput.files[0];
      if (!file) return;

      const allowedTypes = ["image/jpeg", "image/png", "application/pdf"];
      if (!allowedTypes.includes(file.type)) {
        errorMsg.innerText = "❌ Invalid file type. Only JPG, PNG, PDF allowed.";
        return;
      }
      if (file.size > 2 * 1024 * 1024) {
        errorMsg.innerText = "❌ File too large. Max size 2MB.";
        return;
      }

      errorMsg.innerText = "";

      if (file.type.startsWith("image/")) {
        const reader = new FileReader();
        reader.onload = (e) => {
          preview.innerHTML = `
            <div class="mt-3">
              <img src="${e.target.result}" alt="Preview" class="max-h-48 mx-auto rounded-lg shadow-md"/>
              <p class="mt-2 text-sm text-gray-600">${file.name} (${(file.size/1024).toFixed(1)} KB)</p>
            </div>`;
        };
        reader.readAsDataURL(file);
      } else {
        preview.innerText = `Selected File: ${file.name} (${(file.size/1024).toFixed(1)} KB)`;
      }

      selectedFile = file;
    }

    async function uploadFile() {
      if (!selectedFile) {
        alert("Please select a file first");
        return;
      }

      loader.classList.remove("hidden");

      const formData = new FormData();
      formData.append("file", selectedFile);

      try {
        const response = await fetch("http://localhost:5000/api/extract", {
          method: "POST",
          body: formData
        });

        const data = await response.json();

        document.getElementById("name").innerText = data.Name || "Not Found";
        document.getElementById("idno").innerText = data.AadhaarNumber || data.PANNumber || "Not Found";
        document.getElementById("dob").innerText = data.DOB || "Not Found";
        document.getElementById("address").innerText = data.Address || "Not Found";

        results.classList.remove("hidden");
        loader.classList.add("hidden");
        window.location.href = "#results";
      } catch (err) {
        loader.classList.add("hidden");
        alert("Upload failed. Check backend.");
      }
    }

    function reUpload() {
      results.classList.add("hidden");
      preview.innerText = "";
      fileInput.value = "";
      selectedFile = null;
      window.location.href = "#upload";
    }
  </script>
</body>
</html>
