<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Home - Aadhaar Upload</title>
  <style>
    body { font-family: Arial, sans-serif; background:#eaf4fc; margin:0; padding:40px;}
    .container { max-width:600px; margin:auto; background:#fff; padding:30px; border-radius:10px; box-shadow:0px 4px 12px rgba(0,0,0,0.1);}
    h2 { text-align:center; color:#0056b3; margin-bottom:20px;}
    .section { margin:20px 0;}
    input[type="file"] { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px;}
    button { padding:10px 20px; margin:10px 5px 0 0; border:none; border-radius:6px; cursor:pointer; color:#fff;}
    .btn-extract { background-color:#007bff;}
    .btn-extract:hover { background-color:#0056b3;}
    .btn-save { background-color:#28a745;}
    .btn-save:hover { background-color:#218838;}
    pre { background:#f8f9fa; padding:15px; border-radius:6px; border:1px solid #ccc; max-height:200px; overflow:auto;}
  </style>
</head>
<body>
  <div class="container">
    <h2>Aadhaar KYC Upload</h2>
    
    <div class="section">
      <input type="file" id="aadhaarFile" accept=".jpg,.jpeg" required>
    </div>

    <div class="section">
      <button class="btn-extract" onclick="extractData()">Confirm & Extract</button>
      <button class="btn-save" onclick="saveData()">Save</button>
    </div>

    <div class="section">
      <h3>Extracted Details</h3>
      <pre id="result">No data extracted yet.</pre>
    </div>
  </div>

  <script>
    let extractedData = {};

    async function extractData() {
      const fileInput = document.getElementById("aadhaarFile");
      if(fileInput.files.length === 0){
        alert("Please upload Aadhaar file first!");
        return;
      }
      const formData = new FormData();
      formData.append("file", fileInput.files[0]);

      const response = await fetch("http://localhost:5000/api/extract", {
        method: "POST",
        body: formData
      });

      extractedData = await response.json();
      document.getElementById("result").innerText = JSON.stringify(extractedData, null, 2);
    }

    async function saveData() {
      if(!extractedData || Object.keys(extractedData).length === 0){
        alert("No data to save! Extract first.");
        return;
      }

      const response = await fetch("http://localhost:5000/api/save", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(extractedData)
      });

      if(response.ok){
        alert("Data saved successfully!");
      } else {
        alert("Failed to save data!");
      }
    }
  </script>
</body>
</html>
